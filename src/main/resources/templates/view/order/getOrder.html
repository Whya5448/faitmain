<!DOCTYPE html>
<html layout:decorate = "~{layout/default_layout}"
      xmlns:layout = "http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <!--  고유 CSS 추가 -->

    <style>
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            grid-template-rows: 0.1fr 0.3fr 0.3fr 0.3fr 0.3fr;
            gap: 0px 0px;
            grid-auto-flow: row;
            grid-template-areas:
    ". order order order ."
    ". userinfo userinfo userinfo ."
    ". product product product ."
    ". buyer-info buyer-info payment ."
    ". . . . .";
        }

        .order {
            grid-area: order;
        }

        .userinfo {
            grid-area: userinfo;
        }

        .product {
            grid-area: product;
        }

        .buyer-info {
            grid-area: buyer-info;
        }

        .payment {
            grid-area: payment;
        }
    </style>

    <!--  고유 스크립트 추가 -->
    <!-- iamport.payment.js -->
    <script src = "https://cdn.iamport.kr/js/iamport.payment-1.1.5.js" type = "text/javascript"></script>
    <!--
    <script>
        const data = {
            payMethod: $("input[type='radio']:checked").val(),
            orderNumber: $("#orderNumber").val(),
            totalPaymentPrice: Number($("#totalPaymentPrice").val()) - Number($(".usingPoint_input").val()),
            receiverName: $("#receiverName").val(),
            receiverPhone: $("#receiverPhone"),
            receiverAddress: $("#receiverAddress"),
            receiverRequest: $("#receiverRequest"),
        }

        const {IMP} = window;
        IMP.init("imp76668016");

        IMP.request_pay({
            pg: 'html5_inicis',
            pay_method: data.payMethod, //card(신용카드), trans(실시간계좌이체), vbank(가상계좌), phone(휴대폰소액결제)
            merchant_uid: data.orderNumber, //상점에서 관리하시는 고유 주문번호를 전달
            amount: data.totalPaymentPrice,
            buyer_name: data.receiverName,
            buyer_tel: data.receiverPhone,
            buyer_addr: data.receiverAddress,
        }, function (rsp) {
            if (rsp.success) {
                //[1] 서버단에서 결제정보 조회를 위해 jQuery ajax로 imp_uid 전달하기
                jQuery.ajax({
                    url: "/payments/complete", //cross-domain error가 발생하지 않도록 주의해주세요
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        imp_uid: rsp.imp_uid
                        //기타 필요한 데이터가 있으면 추가 전달
                    }
                }).done(function (data) {
                    if (rsp.success) {
                        var msg = '결제가 완료되었습니다.';
                        msg += '고유ID : ' + rsp.imp_uid;
                        msg += '상점 거래ID : ' + rsp.merchant_uid;
                        msg += '결제 금액 : ' + rsp.paid_amount;
                        msg += '카드 승인번호 : ' + rsp.apply_num;
                    } else {
                        var msg = '결제에 실패하였습니다.';
                        msg += '에러내용 : ' + rsp.error_msg;
                    }
                });
            } else {
                var msg = '결제에 실패하였습니다.';
                msg += '에러내용 : ' + rsp.error_msg;

                alert(msg);
            }
        });
    </script>
    -->

</head>

<body>

<!-- Page Content-->
<article class = "py-5" layout:fragment = "content">


    <div class="container">
        <div class="order">
            <div class = "text-center mb-5">
                <h1 class = "fw-bolder">주문 / 결제</h1>
                <p class = "lead fw-normal text-muted mb-0">상품을 구매하는 화면입니다.</p>
            </div>
        </div>

        <div class="userinfo"></div>

        <div class="product">
            <div class = "d-flex align-items-center mt-lg-5 mb-4">
                <img alt = "..." class = "img-fluid rounded-circle"
                     src = "https://dummyimage.com/50x50/ced4da/6c757d.jpg"/>
                <div class = "ms-3">
                    <div class = "fw-bold">상품명</div>
                    <div class = "text-muted">상점이름</div>
                </div>
            </div>
        </div>

        <div class="buyer-info">
            <div class = "bg-light rounded-3 py-5 px-4 px-md-5 mb-5">
                <div class = "text-center mb-5">
                    <h1 class = "fw-bolder">구매자 정보</h1>
                    <p class = "lead fw-normal text-muted mb-0">필수 입력사항</p>
                </div>
                <div class = "row gx-5 justify-content-center">
                    <div class = "col-lg-8 col-xl-6">

                        <form data-sb-form-api-token = "API_TOKEN" id = "contactForm">
                            <!-- Name input-->
                            <div class = "form-floating mb-3">
                                <input class = "form-control" data-sb-validations = "required" id = "name"
                                       placeholder = "Enter your name..." type = "text"/>
                                <label for = "name">Full name</label>
                                <div class = "invalid-feedback" data-sb-feedback = "name:required">A name is
                                                                                                   required.
                                </div>
                            </div>
                            <!-- Email address input-->
                            <div class = "form-floating mb-3">
                                <input class = "form-control" data-sb-validations = "required,email"
                                       id = "email"
                                       placeholder = "name@example.com" type = "email"/>
                                <label for = "email">Email address</label>
                                <div class = "invalid-feedback" data-sb-feedback = "email:required">An email is
                                                                                                    required.
                                </div>
                                <div class = "invalid-feedback" data-sb-feedback = "email:email">Email is not
                                                                                                 valid.
                                </div>
                            </div>
                            <!-- Phone number input-->
                            <div class = "form-floating mb-3">
                                <input class = "form-control" data-sb-validations = "required" id = "phone"
                                       placeholder = "(123) 456-7890" type = "tel"/>
                                <label for = "phone">Phone number</label>
                                <div class = "invalid-feedback" data-sb-feedback = "phone:required">A phone
                                                                                                    number is
                                                                                                    required.
                                </div>
                            </div>
                            <!-- Message input-->
                            <div class = "form-floating mb-3">
                                        <textarea class = "form-control" data-sb-validations = "required" id = "message"
                                                  placeholder = "Enter your message here..." style = "height: 10rem"
                                                  type = "text"></textarea>
                                <label for = "message">Message</label>
                                <div class = "invalid-feedback" data-sb-feedback = "message:required">A message
                                                                                                      is
                                                                                                      required.
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="payment">
            <div class = "card mb-5 mb-xl-0">
                <div class = "card-body p-5">
                    <div class = "small text-uppercase fw-bold">
                        <i class = "bi bi-star-fill text-warning"></i>
                        총 결제금액
                    </div>
                    <div class = "mb-3">
                        <span class = "display-4 fw-bold">99.999</span>
                        <span class = "text-muted">/원</span>
                    </div>
                    <ul class = "list-unstyled mb-4">
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            <strong>5 users</strong>
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            5GB storage
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            Unlimited public projects
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            Community access
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            Unlimited private projects
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            Dedicated support
                        </li>
                        <li class = "mb-2">
                            <i class = "bi bi-check text-primary"></i>
                            Free linked domain
                        </li>
                        <li class = "text-muted">
                            <i class = "bi bi-x"></i>
                            Monthly status reports
                        </li>
                    </ul>
                    <div class = "d-grid"><a class = "btn btn-primary" href = "#!">결제하기</a></div>
                </div>
            </div>
        </div>
    </div>


</article>


</body>
</html>