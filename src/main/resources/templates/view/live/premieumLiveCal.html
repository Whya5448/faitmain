<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
				layout:decorate = "~{layout/default_layout}"
      			xmlns:layout = "http://www.ultraq.net.nz/thymeleaf/layout">
<head>

<meta charset="EUC-KR">
<title>Premium Live Calendar</title>

	<!-- Full Calendar CDN -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.css" integrity="sha256-jLWPhwkAHq1rpueZOKALBno3eKP3m4IMB131kGhAlRQ=" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.js" integrity="sha256-bFpArdcNM5XcSM+mBAUSDAt4YmEIeSAdUASB2rrSli4=" crossorigin="anonymous"></script>


	<!-- <script th:src="@{js/liveFullCalendar.js}"><</script> -->
	<!-- <script>
	document.addEventListener('DOMContentLoaded', function() {
		var calendarEl = document.getElementById('calendar');
		var calendar = new FullCalendar.Calendar(calendarEl, {
			initialView: 'dayGridMonth'
		});
		calendar.render();
	});
	</script> -->
	<script>
		document.addEventListener('DOMContentLoaded', function () {
	        $(function () {
	            var request = $.ajax({
	                url: "/openapi/json/getLiveReservationCal", // 변경하기
	                method: "GET",
	                dataType: "json"
	            });
	
	            request.done(function (data) {
	                console.log(data); // log 로 데이터 찍어주기.
	
	                var calendarEl = document.getElementById('calendar');
	
	                var calendar = new FullCalendar.Calendar(calendarEl, {
	                    initialView: 'dayGridMonth',
	                    headerToolbar: {
	                        left: 'prev,next today',
	                        center: 'title',
	                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
	                    },
	                    editable: true,
	                    droppable: true, // this allows things to be dropped onto the calendar
	                    drop: function (arg) {
	                        // is the "remove after drop" checkbox checked?
	                        if (document.getElementById('drop-remove').checked) {
	                            // if so, remove the element from the "Draggable Events" list
	                            arg.draggedEl.parentNode.removeChild(arg.draggedEl);
	                        }
	                    },
	                    /**
	                     * data 로 값이 넘어온다. log 값 전달.
	                     */
	                    events: [
	                    	{
	                    		"title" : "예약 수 : 5",
	                    		"start" : "2022-06-09"
	                    	}
	                    ]
	                });
	
	                calendar.render();
	            });
	
	            request.fail(function( jqXHR, textStatus ) {
	                alert( "Request failed: " + textStatus );
	            });
	        });
	
	    });
	</script>
	
	<style>
		h2 {
			padding-left: 50px;
			padding-top : 30px;
			margin-bottom: 15px;
		}
	
		#calendar{
			height : 800px;
			width : 1000px;
			padding-bottom: 50px;
			margin : auto;
		}
	</style>
</head>
<body>
	<article layout:fragment="content"  >
		<div class="container-fluid">
			<h2>프리미엄 라이브 캘린더</h2>
			<div id='calendar'>
			</div>
		</div>
	</article>

</body>



</html>